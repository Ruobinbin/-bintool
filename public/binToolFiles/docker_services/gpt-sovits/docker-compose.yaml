version: '3'
services:
  gpt-sovits:
    image: breakstring/gpt-sovits:latest
    ports:
      - "9880:9880"
      - "9871:9871"
      - "9872:9872"
      - "9873:9873"
      - "9874:9874"
    volumes:
      - ./model:/workspace/model
    command: >
      python api.py 
      -dr "model/syq/我整理完今天的照片就休息了，你也别熬夜打游戏哦。.wav" 
      -dt "我整理完今天的照片就休息了，你也别熬夜打游戏哦。" 
      -dl "zh" 
      -d "cuda" 
      -s model/syq/sanyueqi_e15_s180.pth
      -g model/syq/sanyueqi-e15.ckpt
    shm_size: 16G
    deploy:
      resources:
        reservations:
          devices:
          - driver: nvidia
            count: "all"
            capabilities: [gpu]